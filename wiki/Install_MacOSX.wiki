#summary Installation for Mac OSX

= Introduction =

Instructions how to install the needed libraries and test DRControl utility to control Denkovi USB Relay board.

= Tested on =

  * Mac OSX 10.8+
  * [http://denkovi.com/product/44/usb-four-4-relay-output-module-board-for-home-automation.html Denkovi 4 USB Relay Board]

= Python Libraries =

There are two libraries that are needed to interface the relay board.

  * Python-FTDI 
  * PyLibFTDI

= Install =

To install the additional software I have used [http://www.macports.org/ MacPort], but I guess alternatives like [http://mxcl.github.com/homebrew/ HomeBrew] could be used as well.

Install libFTDI

{{{
# sudo port install libftdi
}}}

To install the pylibftdi the PIP is used.

{{{
# sudo easy_install pip
# sudo pip install pylibftdi
}}}

= Test= 

To test that the python software is properly installed following command should give you a printout.

{{{
# python -m pylibftdi.examples.list_devices
}}}

It should list all FTDI devices you have on the system.

Example;
{{{
$ python -m pylibftdi.examples.list_devices
RFXCOM:RFXtrx433:03VHG0NE
FTDI:FT245R USB FIFO:A6VV5PHY
}}}

= Errors =

== Error: libftdi library not found ==

MacPort will install the library to the directory /opt/local/lib/ for some reason the Python will not look here for the library. Therefor the system variable DYLD_LIBRARY_PATH need to point to this library path for the scripts to work properly.

{{{
echo $DYLD_LIBRARY_PATH 
export DYLD_LIBRARY_PATH=/opt/local/lib/
}}}

== Error: device not found (-3) ==

If following error occur when the device is accessed

{{{
pylibftdi._base.FtdiError: device not found (-3)
}}}

It means that the only solution (what I know of) is to unload the FTDI kernel extension, by executing following command;

{{{
# sudo kextunload /System/Library/Extensions/FTDIUSBSerialDriver.kext
}}}

How to reload the FTDI kernel 

{{{
# sudo kextload /System/Library/Extensions/FTDIUSBSerialDriver.kext
}}}